<% content_for :og_name, @artist.name
content_for :og_url, request.url
content_for :og_image, File.join(root_url , @artist.image.url(:large))
content_for :og_description, @artist.name + " is telling fans about their new releases on SNGTRKR. Why don't you follow them too?"
content_for :og_id, @artist.id.to_s
%>
<% content_for :description do %><%= truncate((strip_tags @artist.bio || "" ), :length => 150) %><% end %>
<% content_for :title do %><%= @artist.name %> information and releases 2012<% end %>
<div class="content content-pad-187">
<% if can? :manage, Resque %>
<div class="super-admin">
<%= form_for @artist do |f| %>
<div class="ignore">
  <% if !@artist.ignore? %>
    <%= f.hidden_field :ignore, :value => true %>
    <%= f.submit "Ignore Arist", :type => :image, :src => "/images/ignore.png", :class => "i-artist" %>
  <% else %>
    <%= f.hidden_field :ignore, :value => false %>
    <%= f.submit "Unignore Arist", :type => :image, :src => "/images/unignore.png", :class => "ui-artist" %>

  <% end %>
  </div>
<% end %>
<div class="edit">
<%= link_to edit_artist_path(@artist) do %><i class="icon-edit"></i><% end %>
</div>
</div>
<% end %>
<div id="artist-profile">
<div class="profile-left left">
<div id="profile-image" style="background-image:url(<%= @artist.image.url :large %>);background-repeat:no-repeat;background-position:center;">
<div id="opac-50"></div>
<div id="share-profile">
<h5 class="signika-txt font-22 center-txt share-header">Share this artist</h5>
<ul class="share-list">
<a href="#" title="Share on Facebook" onClick="MyWindow=window.open('https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.sngtrkr.com<%= url_for @artist %>%2F&t=SNGTRKR','ShareSNGTRKRonFacebook','scrollbars=no,width=620,height=340'); return false;"><li class="left fb-icon sm-trigger fb-button"><i class="icon-facebook"></i></li></a>
<a href="#" title="Share on Twitter" onClick="MyWindow=window.open('https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Fwww.sngtrkr.com&text=<%= @artist.name %>+is+using+SNGTRKR+to+keep+their+fans+up+to+date+with+releases.+Check+them+out+&#45;+www.sngtrkr.com<%= url_for @artist %>&via=SNGTRKR','ShareSNGTRKRonTwitter','scrollbars=no,width=620,height=340'); return false;"><li class="left twit-icon sm-trigger twitter-button"><i class="icon-twitter"></i></li></a>
<a href="#" title="Share on Google Plus" onClick="MyWindow=window.open('https://plus.google.com/share?url=http%3A%2F%2Fwww.sngtrkr.com<%= url_for @artist %>','ShareSNGTRKRonGooglePlus','scrollbars=no,width=620,height=340'); return false;"><li class="left goo-icon sm-trigger google-button"><i class="icon-google-plus"></i></li></a>
</ul>
<div class="clear"></div>
<div class="font-13 o-button norm-o-pad signika-font left share-cancel">Cancel</div>
</div> <!-- share-profile -->

<div id="buy-profile">
<h5 class="signika-txt font-22 buy-header">Browse this artist</h5>
<ul class="buy-list">
  <li class="left buy-trigger white-button"><%= link_to image_tag("/images/itunes.png", :alt => "iTunes", :title => "iTunes"), @artist.itunes, :target => "_blank" %></li>
  <li class="left buy-trigger white-button"><%= link_to image_tag("/images/7digital.png", :alt => "7Digital", :title => "7Digital"), @artist.sd, :target => "_blank" %></li>
</ul>
<div class="clear"></div>
<div class="font-13 o-button norm-o-pad signika-font left buy-cancel">Cancel</div>
</div>

<div id="social-bar-shadow"></div>
<div id="social-hidden">
<ul class="artist-sm">
<li class="left pop-trig"><a href="http://www.facebook.com/<%= @artist.fbid %>" target="_blank"><div class="fb-button fb-icon sm-pop"><i class="icon-facebook"></i></div></a></li>
<% if @artist.twitter? %>
<li class="left pop-trig"><a href="http://www.twitter.com/<%= @artist.twitter %>" target="_blank"><div class="sm-pop twitter-button twit-icon"><i class="icon-twitter"></i></div></a></li><% else %><% end %>
<% if @artist.soundcloud? %>
<li class="left pop-trig"><a href="http://www.soundcloud.com/<%= @artist.soundcloud %>" target="_blank"><div class="sm-pop sc-icon soundcloud-button"><%= image_tag "/images/soundcloud.png", :alt => "Soundcloud" %></div></a></li><% else %><% end %>
<% if @artist.youtube? %>
<li class="left pop-trig"><a href="http://www.youtube.com/<%= @artist.youtube %>" target="_blank"><div class="sm-pop yt-icon white-button"><%= image_tag "/images/youtube.png", :alt => "Youtube" %></div></a></li><% else %><% end %>
<% if @artist.website? %>
<li class="left pop-trig"><a href="http://<%= @artist.website %>" target="_blank"><div class="sm-pop web-icon black-button"><i class="icon-globe"></i></div></a></li><% else %><% end %>
</ul>
</div> <!-- social-hidden -->
</div> <!-- profile-image -->
</div> <!-- profile-left -->
<div class="profile-right right">
<div id="profile-info">
	<h2 class="font-22 profile-name"><strong><%= @artist.name %></strong></h2>
	<i class="icon-music i-info" title="Genre"></i><% if @artist.genre? %><%= @artist.genre %><% else %><span class="light-gray">No genre set</span><% end %><br/>
	<i class="icon-tag i-info" title="Record Label"></i><% if @artist.label_name? %><%= truncate((strip_tags @artist.label_name || "" ), :length => 50) %><% else %><span class="light-gray">No label set</span><% end %><br/><br/>
<div id="artist-bio">
  <% if @artist.bio? %>
    <%= raw(truncate((strip_tags @artist.bio || "" ), :length => 480, :omission => "...<a href='#bio-full'>Read more</a>")) %>
  <% else %>
    <span class="light-gray">No biography set</span>
  <% end %>
</div>
</div>
  <ul class="menu-user">
  <li class="left o-button signika-font norm-o-pad font-13 buy-profile"><i class="icon-shopping-cart"></i>Buy</li>
  </li>
  <li class="left o-button signika-font norm-o-pad font-13 share-profile"><i class="icon-share-alt"></i>Share</li>
  </ul>
</div> <!-- profile-right -->
<div class="clear"></div>
</div> <!-- artist-profile -->

</div>
</div>
<div id="timeline-outer">
<%= image_tag "/images/shadow-line.png", :id => 'shadow-top' %>
<div id="timelime-trim">
<div id="timeline">
<%= image_tag "/images/timeline-left.png", :alt => "SNGTRKR", :id => "left-logo" %>
<div id="left-line"></div>
<ul class="release-list">
<%= render :partial => 'timeline/release', :collection => @timeline.order("date ASC"), :locals => { :date_format => "%d/%m/%y", :date_class => 'font-15', :artist_page => 'true' } %>
</ul>
<div class="clear"></div>
</div>
</div>
<%= image_tag "/images/shadow-line-bot.png", :id => 'shadow-bot' %>
</div>
<div class="content content-pad-160-bottom">
			<div id="bio-full">
	<div id="bio">
		<div class="signika-txt font-35 bio-title">Biography</div>
		<%= raw(@artist.bio) %></div>
	</div>
	<script type="text/javascript">
$(document).ready(function(){
  $('#bio a').attr('target', '_blank');
		$(".share-profile").click(function() {
			$('#opac-50').fadeIn("normal");
			$('#share-profile').animate({right : 0}, "slow");
			$('#buy-profile').animate({left : -310}, "slow");
		});
		$(".share-cancel").click(function() {
			$('#opac-50').fadeOut("normal");
			$('#share-profile').animate({right : -310}, "slow");
		});
		$(".sm-trigger").click(function() {
			$('#opac-50').fadeOut("normal");
			$('#share-profile').animate({right : -310}, "slow");
		});
	   $(".buy-profile").click(function() {
			$('#opac-50').fadeIn("normal");
			$('#buy-profile').animate({left : 0}, "slow");
			$('#share-profile').animate({right : -310}, "slow");
		});
		$(".buy-cancel").click(function() {
			$('#opac-50').fadeOut("normal");
			$('#buy-profile').animate({left : -310}, "slow");
		});
		$(".buy-trigger").click(function() {
			$('#opac-50').fadeOut("normal");
			$('#buy-profile').animate({left : -310}, "slow");
		});
		
				$(".pop-trig").mouseover(function(){
				$(this).closest(".pop-trig").find('.sm-pop').stop().animate({bottom : -53}, "slow");
			}).mouseout(function(){
				$(this).closest(".pop-trig").find('.sm-pop').stop().animate({bottom : -78}, "slow");
			});
			$(".edit").mouseover(function(){
				$('.edit').stop().animate({left : 60}, "slow");
			}).mouseout(function(){
				$('.edit').stop().animate({left : 0}, "slow");
			});
			$(".ignore").mouseover(function(){
				$('.ignore').stop().animate({left : 60}, "slow");
			}).mouseout(function(){
				$('.ignore').stop().animate({left : 0}, "slow");
			});
					$(".share-release").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : -100}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeOut("normal");
			$(this).closest(".each-release").find('.opac-50').fadeIn("normal");
			$(this).closest(".each-release").find('#share-release').animate({right : 0}, "slow");
		});
		$(".r-grad").mouseover(function(){
				$(this).closest(".each-release").find('.release-info').stop().animate({bottom : 33}, "slow");
				$(this).closest(".each-release").find('.release-menu').stop().animate({bottom : 0}, "slow");
			}).mouseout(function(){
				$(this).closest(".each-release").find('.release-info').stop().animate({bottom : 13}, "slow");
				$(this).closest(".each-release").find('.release-menu').stop().animate({bottom : -25}, "slow");
			});
		$(".share-cancel").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : 13}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeIn("normal");
			$(this).closest(".each-release").find('.opac-50').fadeOut("normal");
			$(this).closest(".each-release").find('#share-release').animate({right : -210}, "slow");
		});
		$(".sm-trigger").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : 13}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeIn("normal");
			$(this).closest(".each-release").find('.opac-50').fadeOut("normal");
			$(this).closest(".each-release").find('#share-release').animate({right : -210}, "slow");
		});
		$(".buy-release").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : -100}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeOut("normal");
			$(this).closest(".each-release").find('.opac-50').fadeIn("normal");
			$(this).closest(".each-release").find('#buy-release').animate({left : 0}, "slow");
		});
		$(".buy-cancel").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : 13}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeIn("normal");
			$(this).closest(".each-release").find('.opac-50').fadeOut("normal");
			$(this).closest(".each-release").find('#buy-release').animate({left : -210}, "slow");
		});
		$(".buy-trigger").click(function() {
			$(this).closest(".each-release").find('.release-info').animate({bottom : 13}, "slow");
			$(this).closest(".each-release").find('.release-menu').animate({bottom : -25}, "slow");
			$(this).closest(".each-release").find('.r-grad').fadeIn("normal");
			$(this).closest(".each-release").find('.opac-50').fadeOut("normal");
			$(this).closest(".each-release").find('#buy-release').animate({left : -210}, "slow");
		});
});

</script>
		<script type="text/javascript">
$(document).ready(function () {        
        $('#timeline').mousedown(function (event) {
            $(this)
                .data('down', true)
                .data('x', event.clientX)
                .data('scrollLeft', this.scrollLeft);
                
            return false;
        }).mouseup(function (event) {
            $(this).data('down', false);
        }).mousemove(function (event) {
            if ($(this).data('down') == true) {
                this.scrollLeft = $(this).data('scrollLeft') + $(this).data('x') - event.clientX;
            }
        }).mousewheel(function (event, delta) {
            this.scrollLeft -= (delta * 30);
        }).css({
            'overflow' : 'hidden',
            'cursor' : '-moz-grab'
        });
    });
    
    $(window).mouseout(function (event) {
        if ($('#timeline').data('down')) {
            try {
                if (event.originalTarget.nodeName == 'BODY' || event.originalTarget.nodeName == 'HTML') {
                    $('#timeline').data('down', false);
                }                
            } catch (e) {}
        }
    });
        //mousewheel
        var stepsWidth = 0;
			var widths = new Array();
			$('.release-list .each-release').each(function(i) {
				var $step = $(this);
				widths[i] = stepsWidth;
				stepsWidth += $step.width();
			});
			$('.release-list').width(stepsWidth+220);
		</script>
		<%= render 'shared/fb_async' %>