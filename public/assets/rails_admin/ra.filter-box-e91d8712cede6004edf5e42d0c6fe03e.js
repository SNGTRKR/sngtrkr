(function(a){var b;a.filters=b={options:{regional:{datePicker:{dateFormat:"mm/dd/yy"}}},append:function(b,c,d,e,f,g,h){var i="f["+c+"]["+h+"][v]",j="f["+c+"]["+h+"][o]";switch(d){case"boolean":var k='<select class="input-small" name="'+i+'">'+'<option value="_discard">...</option>'+'<option value="true"'+(e=="true"?'selected="selected"':"")+">True</option>"+'<option value="false"'+(e=="false"?'selected="selected"':"")+">False</option>"+'<option disabled="disabled">---------</option>'+"<option "+(e=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(e=="_blank"?'selected="selected"':"")+' value="_blank"  >Is blank</option>'+"</select>";break;case"date":case"datetime":case"timestamp":var k='<select class="switch-additionnal-fieldsets input-small" name="'+j+'">'+"<option "+(f=="default"?'selected="selected"':"")+' data-additional-fieldset="default" value="default">Date ...</option>'+"<option "+(f=="between"?'selected="selected"':"")+' data-additional-fieldset="between" value="between">Between ... and ...</option>'+"<option "+(f=="today"?'selected="selected"':"")+' value="today">Today</option>'+"<option "+(f=="yesterday"?'selected="selected"':"")+' value="yesterday">Yesterday</option>'+"<option "+(f=="this_week"?'selected="selected"':"")+' value="this_week">This week</option>'+"<option "+(f=="last_week"?'selected="selected"':"")+' value="last_week">Last week</option>'+'<option disabled="disabled">---------</option>'+"<option "+(f=="_not_null"?'selected="selected"':"")+' value="_not_null">Is present</option>'+"<option "+(f=="_null"?'selected="selected"':"")+' value="_null" >Is blank</option>'+"</select>",l='<input class="date additional-fieldset default input-small" style="display:'+(!f||f=="default"?"inline-block":"none")+';" type="text" name="'+i+'[]" value="'+(e[0]||"")+'" /> '+'<input placeholder="-∞" class="date additional-fieldset between input-small" style="display:'+(f=="between"?"inline-block":"none")+';" type="text" name="'+i+'[]" value="'+(e[1]||"")+'" /> '+'<input placeholder="∞" class="date additional-fieldset between input-small" style="display:'+(f=="between"?"inline-block":"none")+';" type="text" name="'+i+'[]" value="'+(e[2]||"")+'" />';break;case"enum":var m=e instanceof Array?!0:!1,k='<select style="display:'+(m?"none":"inline-block")+'" '+(m?"":'name="'+i+'"')+' data-name="'+i+'" class="select-single input-small">'+'<option value="_discard">...</option>'+"<option "+(e=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(e=="_blank"?'selected="selected"':"")+' value="_blank">Is blank</option>'+'<option disabled="disabled">---------</option>'+g+"</select>"+'<select multiple="multiple" style="display:'+(m?"inline-block":"none")+'" '+(m?'name="'+i+'[]"':"")+' data-name="'+i+'[]" class="select-multiple input-small">'+g+"</select> "+'<a href="#" class="switch-select"><i class="icon-'+(m?"minus":"plus")+'"></i></a>';break;case"string":case"text":case"belongs_to_association":var k='<select class="switch-additionnal-fieldsets input-small" value="'+f+'" name="'+j+'">'+'<option data-additional-fieldset="additional-fieldset"'+(f=="like"?'selected="selected"':"")+' value="like">Contains</option>'+'<option data-additional-fieldset="additional-fieldset"'+(f=="is"?'selected="selected"':"")+' value="is">Is exactly</option>'+'<option data-additional-fieldset="additional-fieldset"'+(f=="starts_with"?'selected="selected"':"")+' value="starts_with">Starts with</option>'+'<option data-additional-fieldset="additional-fieldset"'+(f=="ends_with"?'selected="selected"':"")+' value="ends_with">Ends with</option>'+'<option disabled="disabled">---------</option>'+"<option "+(f=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(f=="_blank"?'selected="selected"':"")+' value="_blank">Is blank</option>'+"</select>",l='<input class="additional-fieldset input-small" style="display:'+(f=="_blank"||f=="_present"?"none":"inline-block")+';" type="text" name="'+i+'" value="'+e+'" /> ';break;default:var k='<input type="text" class="input-small" name="'+i+'" value="'+e+'"/> '}var n='<p class="filter form-search"><span class="label label-info form-label"><a href="#" class="delete"><i class="icon-trash icon-white"></i></a> '+b+"</span> "+k+" "+(l||"")+"</div> ";a("#filters_box").append(n),a("#filters_box .date").datepicker(this.options.regional.datePicker),a("hr.filters_box:hidden").show("slow")}},a("#filters a").live("click",function(b){b.preventDefault(),a.filters.append(a(this).data("field-label"),a(this).data("field-name"),a(this).data("field-type"),a(this).data("field-value"),a(this).data("field-operator"),a(this).data("field-options"),a.now().toString().slice(6,11))}),a("#filters_box .delete").live("click",function(b){b.preventDefault(),form=a(this).parents("form"),a(this).parents(".filter").remove(),!a("#filters_box").children().length&&a("hr.filters_box:visible").hide("slow")}),a("#filters_box .switch-select").live("click",function(b){b.preventDefault();var c=a(this).siblings("select:visible"),d=a(this).siblings("select:hidden");d.attr("name",d.data("name")).show("slow"),c.attr("name",null).hide("slow"),a(this).find("i").toggleClass("icon-plus icon-minus")}),a("#filters_box .switch-additionnal-fieldsets").live("change",function(){var b=a(this).find("option:selected");(klass=a(b).data("additional-fieldset"))?(a(this).siblings(".additional-fieldset:not(."+klass+")").hide("slow"),a(this).siblings("."+klass).show("slow")):a(this).siblings(".additional-fieldset").hide("slow")})})(jQuery);